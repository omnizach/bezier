(function(){var t,n,e,r,i=function(t,n){return(+t%(n=+n)+n)%n},u=[].slice;r=function(){var t,n,e,r,i,u,s;for(i=function(){var n,e,r;for(r=[],n=0,e=arguments.length;e>n;n++)t=arguments[n],r.push(t.length);return r}.apply(this,arguments),r=Math.min.apply(Math,i),s=[],n=e=0,u=r;u>=0?u>e:e>u;n=u>=0?++e:--e)s.push(function(){var e,r,i;for(i=[],e=0,r=arguments.length;r>e;e++)t=arguments[e],i.push(t[n]);return i}.apply(this,arguments));return s},Function.prototype._getter=function(t,n){return Object.defineProperty(this.prototype,t,{get:n,configurable:!0})},Function.prototype._setter=function(t,n){return Object.defineProperty(this.prototype,t,{set:n,configurable:!0})},e=function(){function t(t,n){this.x=t,this.y=n}return t}(),t=function(){function t(t,n,e,r){this.p0=t,this.p1=n,this.p2=e,this.p3=r}return t._base3=function(t,n,e,r,i){var u,s;return u=-3*n+9*e-9*r+3*i,s=t*u+6*n-12*e+6*r,t*s-3*n+3*e},t.prototype._findT=function(t,n){var e;return t=Math.min(t,this.length),n=n||t/this.length,e=(this.lengthAt(n)-t)/this.length,Math.abs(e)<1e-4?n:this._findT(t,n-e/2)},t.prototype.lengthAt=function(n){var e,r;return null==n&&(n=1),n=n>1?1:0>n?0:n,r=n/2,e=function(n){var e;return e=r*n[0]+r,n[1]*Math.sqrt(Math.pow(t._base3(e,this.p0.x,this.p1.x,this.p2.x,this.p3.x),2)+Math.pow(t._base3(e,this.p0.y,this.p1.y,this.p2.y,this.p3.y),2))},r*[[-.1252,.2491],[.1252,.2491],[-.3678,.2335],[.3678,.2335],[-.5873,.2032],[.5873,.2032],[-.7699,.1601],[.7699,.1601],[-.9041,.1069],[.9041,.1069],[-.9816,.0472],[.9816,.0472]].map(e,this).reduce(function(t,n){return t+n})},t._getter("length",function(){return null!=this._length?this._length:this._length=this.lengthAt(1)}),t.prototype.point=function(t){return new e(Math.pow(1-t,3)*this.p0.x+3*Math.pow(1-t,2)*t*this.p1.x+3*(1-t)*Math.pow(t,2)*this.p2.x+Math.pow(t,3)*this.p3.x,Math.pow(1-t,3)*this.p0.y+3*Math.pow(1-t,2)*t*this.p1.y+3*(1-t)*Math.pow(t,2)*this.p2.y+Math.pow(t,3)*this.p3.y)},t.prototype.pointAtLength=function(t){return this.point(this._findT(t))},t.prototype.firstDerivative=function(t){return new e(3*Math.pow(1-t,2)*(this.p1.x-this.p0.x)+6*(1-t)*t*(this.p2.x-this.p1.x)+3*Math.pow(t,2)*(this.p3.x-this.p2.x),3*Math.pow(1-t,2)*(this.p1.y-this.p0.y)+6*(1-t)*t*(this.p2.y-this.p1.y)+3*Math.pow(t,2)*(this.p3.y-this.p2.y))},t.prototype.secondDerivative=function(t){return new e(6*(1-t)*(this.p2.x-2*this.p1.x+this.p0.x)+6*t*(this.p3.x-2*this.p2.x+this.p2.x),6*(1-t)*(this.p2.y-2*this.p1.y+this.p0.y)+6*t*(this.p3.y-2*this.p2.y+this.p2.y))},t.prototype.curvature=function(t){var n,e;return n=this.firstDerivative(t)||0,e=this.secondDerivative(t)||0,(n.x*e.y-n.y*e.x)/Math.pow(n.x*n.x+n.y*n.y,1.5)},t.prototype.tangent=function(t){var n,r;return r=this.firstDerivative(t),n=Math.sqrt(r.x*r.x+r.y*r.y)||1,new e(r.x/n,r.y/n)},t.prototype.normal=function(t){var n;return n=this.tangent(t),new e(-n.y,n.x)},t}(),n=function(){function n(t,e){var r;this.closed=e,this.curves=n.computeBezierSpline(t.map(function(t){return t.x}),t.map(function(t){return t.y}),e),this.startLengths=function(){var t,n,e,i;for(e=this.curves,i=[],t=0,n=e.length;n>t;t++)r=e[t],i.push(r.startLength);return i}.call(this),this.endLengths=function(){var t,n,e,i;for(e=this.curves,i=[],t=0,n=e.length;n>t;t++)r=e[t],i.push(r.endLength);return i}.call(this),this.length=this.endLengths.slice(-1)[0]}return n.computeControlPoints=function(t){var n,e,r,i,u,s,h,o,p,a,c,l,f,g,v;for(n=function(t){return 0>=t?0:t>=o-1?2:1},r=function(t){return t>=o-1?0:1},o=t.length-1,a=new Array(o-1),c=new Array(o-1),e=function(){var t,n,e;for(e=[],i=t=0,n=o;n>=0?n>t:t>n;i=n>=0?++t:--t)e.push(4);return e}(),e[0]=2,e[o-1]=7,l=function(){var n,e,r;for(r=[],i=n=0,e=o-1;e>=0?e>n:n>e;i=e>=0?++n:--n)r.push(4*t[i]+2*t[i+1]);return r}(),l[0]=t[0]+2*t[1],l.push(8*t[o-1]+t[o]),i=u=0,f=e.length-1;f>=0?f>u:u>f;i=f>=0?++u:--u)h=n(i+1)/e[i],e[i+1]-=h*r(i),l[i+1]-=h*l[i];for(a[o-1]=l[o-1]/e[o-1],i=s=g=e.length-2;0>=g?0>=s:s>=0;i=0>=g?++s:--s)a[i]=(l[i]-r(i)*a[i+1])/e[i];for(i=p=0,v=e.length-1;v>=0?v>p:p>v;i=v>=0?++p:--p)c[i]=2*t[i+1]-a[i+1];return c[o-1]=.5*(t[o]+a[o-1]),{p1:a,p2:c}},n.computeBezierSpline=function(s,h,o){var p,a,c,l,f,g,v,y,x,d,m,w,M,L,_,b,A,D,z,I,C;for(l=12,o&&(g=function(t){var n,e,r,u;for(u=[],n=e=0,r=l;r>=0?r>e:e>r;n=r>=0?++e:--e)u.push(t[i(n,t.length)]);return u},f=function(t){var n,e,r,u;for(u=[],n=e=r=l;0>=r?0>e:e>0;n=0>=r?++e:--e)u.push(t[i(t.length-n,t.length)]);return u},s=u.call(f(s)).concat(u.call(s),u.call(g(s))),h=u.call(f(h)).concat(u.call(h),u.call(g(h)))),a=n.computeControlPoints(s),c=n.computeControlPoints(h),C=0,o&&(s=s.slice(l,+-l+1||9e9),h=h.slice(l,+-l+1||9e9),a.p1=a.p1.slice(l,+-l+1||9e9),c.p1=c.p1.slice(l,+-l+1||9e9),a.p2=a.p2.slice(l,+-l+1||9e9),c.p2=c.p2.slice(l,+-l+1||9e9)),D=r(s.slice(0,-1),h.slice(0,-1),a.p1,c.p1,a.p2,c.p2,s.slice(1),h.slice(1)),I=[],v=y=0,x=D.length;x>y;v=++y)z=D[v],d=z[0],m=z[1],w=z[2],M=z[3],L=z[4],_=z[5],b=z[6],A=z[7],p=new t(new e(d,m),new e(w,M),new e(L,_),new e(b,A)),p.startLength=C,p.endLength=C+p.length,p.segmentOffset=v/(s.length-1),p.index=v,C+=p.length,I.push(p);return I},n.prototype._curveIndex=function(t){var n;return n=Math.trunc(t),t%=1,0>n||n>this.curves.length?null:n===this.curves.length?{i:n-1,t:t+1}:{i:n,t:t}},n.prototype.point=function(t){var n;return n=this._curveIndex(t),this.curves[n.i].point(n.t)},n.prototype.pointAtLength=function(t){var n,e;return n=function(t,e,r,i){var u;switch(u=r+i>>>1,!1){case!((t[u-1]||0)<=e&&e<=t[u]):return u;case!(e<(t[u-1]||0)):return n(t,e,r,u);default:return n(t,e,u+1,i)}},e=n(this.endLengths,Math.min(t,this.endLengths[this.endLengths.length-1]),0,this.endLengths.length),this.curves[e].pointAtLength(t-this.startLengths[e])},n.prototype.firstDerivative=function(t){var n;return n=this._curveIndex(t),this.curves[n.i].firstDerivative(n.t)},n.prototype.secondDerivative=function(t){var n;return n=this._curveIndex(t),this.curves[n.i].secondDerivative(n.t)},n.prototype.curvature=function(t){var n;return n=this._curveIndex(t),this.curves[n.i].curvature(n.t)},n.prototype.tangent=function(t){var n;return n=this._curveIndex(t),this.curves[n.i].tangent(n.t)},n.prototype.normal=function(t){var n;return n=this._curveIndex(t),this.curves[n.i].normal(n.t)},n.prototype.normalize=function(t,e,r){var i,u;switch(r=r||Math.ceil(this.length/(e||1)),t){case"length":return e=this.length/r,u=function(){var t,n,u;for(u=[],i=t=0,n=r;n>=0?n>t:t>n;i=n>=0?++t:--t)u.push(this.pointAtLength(i*e));return u}.call(this),new n(u,this.closed);case"x":return this;default:return this}},n}(),d3.bezier=function(){var t,e,r,i,u,s,h,o,p,a,c,l,f,g;return p=function(t){var n,e,r;return r=l(t)/2,n=t.normal(0),e=t.normal(1),"M "+(t.p0.x-n.x*r)+", "+(t.p0.y-n.y*r)+" L "+(t.p0.x+n.x*r)+", "+(t.p0.y+n.y*r)+" L "+(t.p3.x+e.x*r)+", "+(t.p3.y+e.y*r)+" L "+(t.p3.x-e.x*r)+", "+(t.p3.y-e.y*r)+" Z"},i=function(t){return"M "+t.p0.x+", "+t.p0.y+" C "+t.p1.x+", "+t.p1.y+" "+t.p2.x+", "+t.p2.y+" "+t.p3.x+", "+t.p3.y},f=function(t){return t[0]},g=function(t){return t[1]},r=d3.scale.linear().domain([0,1]).interpolate(d3.interpolateHsl).range(["#c00000","#008000"]),e=function(t){return r(t.segmentOffset)},t=!1,o="none",l=function(){return 1},c=10,a=1,u=i,s="none",h=function(r){return r.each(function(r){var i,h,p;return h=d3.zip(r.map(f),r.map(g)).map(function(t){return{x:t[0],y:t[1]}}),p=new n(h,t).normalize(o,c,a),i=d3.select(this).append("g").classed("bezier-path",!0).datum(p),i.selectAll("path").data(p.curves).enter().append("path").attr("d",u).style("fill",s).style("stroke",e)})},h.x=function(t){return arguments.length?(f=t,h):f},h.y=function(t){return arguments.length?(g=t,h):g},h.color=function(t){return arguments.length?(e=d3.functor(t),h):e},h.closed=function(n){return arguments.length?(t=n,h):t},h.normalize=function(t){return arguments.length?(o=t,h):o},h.width=function(t){return arguments.length?(l=d3.functor(t),h):l},h.segmentLength=function(t){return arguments.length?(c=t,a=void 0,h):c},h.segmentCount=function(t){return arguments.length?(a=t,c=void 0,h):a},h.fill=function(t){return arguments.length?(s=t,h):s},h.drawSegment=function(t){return arguments.length?(u=function(){switch(t){case"draw":return i;case"paint":return p;default:return d3.functor(t)}}(),h):u},h}}).call(this);